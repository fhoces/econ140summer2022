---
title: "Ec140 - Core Concepts from Statistics"
author: "Fernando Hoces la Guardia"
date: "06/23/2022"
output: 
  xaringan::moon_reader:
    footer: "These slides available at https://fhoces.github.io/econ140summer2022/"
    css: [default, metropolis, metropolis-fonts] 
    lib_dir: libs
    nature:
      ratio: '16:9'
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
editor_options: 
  chunk_output_type: console
---

<style type="text/css">
.remark-slide-content {
    font-size: 30px;
    padding: 1em 1em 1em 1em;
}
</style>


```{r Setup, include = F}
options(htmltools.dir.version = FALSE)
library(pacman)
p_load(ggthemes, viridis, knitr, extrafont, tidyverse, magrittr, latex2exp, parallel, Ecdat, wooldridge, dslabs, ggforce)
# Define colors
red_pink <- "#e64173"
met_slate <- "#23373b" # metropolis font color
# Notes directory
# Knitr options
opts_chunk$set(
  comment = "#>",
  fig.align = "center",
  fig.height = 7,
  fig.width = 10.5,
  #dpi = 300,
  #cache = T,
  warning = F,
  message = F
)  
theme_simple <- theme_bw() + theme(
  axis.line = element_line(color = met_slate),
  panel.grid = element_blank(),
  rect = element_blank(),
  strip.text = element_blank(),
  text = element_text(family = "Fira Sans", color = met_slate, size = 14),
  axis.text.x = element_text(size = 12),
  axis.text.y = element_text(size = 12),
  axis.ticks = element_blank(),
  plot.title = element_blank(),
  legend.position = "none"
)
theme_empty <- theme_bw() + theme(
  line = element_blank(),
  rect = element_blank(),
  strip.text = element_blank(),
  axis.text = element_blank(),
  plot.title = element_blank(),
  axis.title = element_blank(),
  plot.margin = structure(c(0, 0, -1, -1), unit = "lines", valid.unit = 3L, class = "unit"),
  legend.position = "none"
)
```

# Housekeeping 

- Updated Syllabus
  - Fixed dates on PS1. Due this Friday 5pm on gradescope. 
  
- Unofficial Course Capture! (second attempt!)

- Finish Ch 1 of MM by the end of the week. 







---
count:false

# Variance and Standard Deviation 1/N (Sample)

.font80[
.pull-left[
- Random variables -> probabilities -> distributions -> data -> mean/expectation

- Let's look at another data set:  


```{r, echo=FALSE, include=TRUE, results="asis"}

# Generate data
df <- data.frame(
  moc_se = 1:8,
  hp =  c(81,83,90,88,78,83,77, 96) ,
  got = c(90, 96, 96, 97, 93, 94, 93, 55) # draw integers
)

```


]

]




.font80[

.pull-right[

```{r, echo=FALSE, include=TRUE, results="asis"}

df_tab <- df
colnames(df_tab) <- c("\\(i\\)", "Harry Potter Movies (\\(X\\))", "Game of Thrones Seasons (\\(Y\\))")

df_tab %>% DT::datatable(caption = "Rotten Tomatos Scores", options = list(dom = "t", ordering = FALSE, columnDefs = list(list(className = 'dt-center', targets = "_all"))), rownames = FALSE)
```


]

]

---
count:true

# Variance and Standard Deviation 1/N (Sample)
.font80[
.pull-left[
- Random variables -> probabilities -> distributions -> data -> mean/expectation

- Let's look at another data set:  


```{r, echo=FALSE, include=TRUE, results="asis"}

# Generate data
df <- data.frame(
  moc_se = 1:8,
  hp =  c(81,83,90,88,78,83,77, 96) ,
  got = c(90, 96, 96, 97, 93, 94, 93, 55) # draw integers
)

```


$$
\begin{equation}
\overline{X} = `r round(mean(df$hp),1) ` \\
\overline{Y} = `r round(mean(df$got),1) `
\end{equation}
$$

- Based on this data set, which one should we watch?

- In addition to the mean, what other summary statistic (from data to one number) would you like to communicate. 

- Lets draw the data
]

]




.font80[

.pull-right[

```{r, echo=FALSE, include=TRUE, results="asis"}

df_tab <- df
colnames(df_tab) <- c("\\(i\\)", "Harry Potter Movies (\\(X\\))", "Game of Thrones Seasons (\\(Y\\))")

df_tab %>% DT::datatable(caption = "Rotten Tomatos Scores", options = list(dom = "t", ordering = FALSE, columnDefs = list(list(className = 'dt-center', targets = "_all"))), rownames = FALSE)
```


]

]


---
count:false

# Variance and Standard Deviation 2/N (Sample)

.font80[

.pull-right[

```{r, echo=FALSE, include=TRUE, results="asis"}

df_tab <- df
colnames(df_tab) <- c("\\(i\\)", "Harry Potter Movies (\\(X\\))", "Game of Thrones Seasons (\\(Y\\))")

df_tab %>% DT::datatable(caption = "Rotten Tomatos Scores", options = list(dom = "t", ordering = FALSE, columnDefs = list(list(className = 'dt-center', targets = "_all"))), rownames = FALSE)
```


]

]


---
count:false

# Variance and Standard Deviation 2/N (Sample)

```{r, echo=FALSE, include=TRUE, results="asis"}

df <- df %>% mutate(dis_hp = hp - mean(hp), 
                    dis_got = got - mean(got))


```

.font80[
.pull-left[




$$
\begin{equation}
\overline{X} = `r round(mean(df$hp),1) ` \\
\overline{Y} = `r round(mean(df$got),1) `
\end{equation}
$$


]

]


.font80[

.pull-right[

```{r, echo=FALSE, include=TRUE, results="asis"}

df_tab <- df %>% select(c(moc_se, hp, dis_hp, got, dis_got))

colnames(df_tab) <- c("\\(i\\)", "\\(X\\)",  "\\(X - \\overline{X}\\)",  
                      "\\(Y\\)",  "\\(Y - \\overline{Y}\\)")

df_tab %>% DT::datatable(caption = "Rotten Tomatos Scores", options = list(dom = "t", ordering = FALSE, columnDefs = list(list(className = 'dt-center', targets = "_all"))), rownames = FALSE)
```



]

]
---
count:false

# Variance and Standard Deviation 2/N (Sample)


.font80[

.pull-right[

```{r, echo=FALSE, include=TRUE, results="asis"}

df_tab <- df %>% select(c(moc_se, hp, dis_hp, got, dis_got))

colnames(df_tab) <- c("\\(i\\)", "\\(X\\)",  "\\(X - \\overline{X}\\)",  
                      "\\(Y\\)",  "\\(Y - \\overline{Y}\\)")

df_tab %>% DT::datatable(caption = "Rotten Tomatos Scores", options = list(dom = "t", ordering = FALSE, columnDefs = list(list(className = 'dt-center', targets = "_all"))), rownames = FALSE)
```



]

]



.font80[
.pull-left[




$$
\begin{equation}
\overline{X} = `r round(mean(df$hp),1) ` \\
\overline{Y} = `r round(mean(df$got),1) `
\end{equation}
$$



$$
\begin{equation}
\frac{ \sum_{1:8}\left( x - \overline{X} \right) }{8} = ? \\
\frac{ \sum_{1:8}\left( y - \overline{Y} \right) }{8} = ?
\end{equation}
$$

]

]



---
count:false

# Variance and Standard Deviation 2/N (Sample)


.font80[

.pull-right[

```{r, echo=FALSE, include=TRUE, results="asis"}

df_tab <- df %>% select(c(moc_se, hp, dis_hp, got, dis_got))

colnames(df_tab) <- c("\\(i\\)", "\\(X\\)",  "\\(X - \\overline{X}\\)",  
                      "\\(Y\\)",  "\\(Y - \\overline{Y}\\)")

df_tab %>% DT::datatable(caption = "Rotten Tomatos Scores", options = list(dom = "t", ordering = FALSE, columnDefs = list(list(className = 'dt-center', targets = "_all"))), rownames = FALSE)
```



]

]



.font80[
.pull-left[




$$
\begin{equation}
\overline{X} = `r round(mean(df$hp),1) ` \\
\overline{Y} = `r round(mean(df$got),1) `
\end{equation}
$$



$$
\begin{equation}
\frac{ \sum_{1:8}\left( x - \overline{X} \right) }{8} = `r round(mean(df$dis_hp),1) ` \\
\frac{ \sum_{1:8}\left( y - \overline{Y} \right) }{8} = `r round(mean(df$dis_got),1) `
\end{equation}
$$

]

]



---
# Variance and Standard Deviation 2/N (Sample)



.font80[
.pull-left[

$$
\begin{equation}
\overline{X} = `r round(mean(df$hp),1) ` \\
\overline{Y} = `r round(mean(df$got),1) `
\end{equation}
$$


$$
\begin{equation}
\frac{ \sum_{1:8}\left( x - \overline{X} \right) }{8} = `r round(mean(df$dis_hp),1) ` \\
\frac{ \sum_{1:8}\left( y - \overline{Y} \right) }{8} = `r round(mean(df$dis_got),1) `
\end{equation}
$$




]

]




.font50[

.pull-right[

```{r, echo=FALSE, include=TRUE, results="asis"}

df <- df %>% mutate(dis_hp_2 = dis_hp^2 , 
                    dis_got_2 = dis_got^2)



df_tab <- df %>% select(c(moc_se, hp, dis_hp, dis_hp_2, got, dis_got, dis_got_2))

colnames(df_tab) <- c("\\(i\\)", "\\(X\\)",  "\\(X - \\overline{X}\\)", 
                      "\\( (X - \\overline{X})^2 \\)",  "\\(Y\\)",  "
                      \\(Y - \\overline{Y}\\)", "\\( (X - \\overline{X})^2 \\)")

df_tab %>% DT::datatable(caption = "Rotten Tomatos Scores", options = list(dom = "t", ordering = FALSE, columnDefs = list(list(className = 'dt-center', targets = "_all"))), rownames = FALSE)
```


]

]


---
# Variance and Standard Deviation 2/N (Sample)



.font80[
.pull-left[

$$
\begin{equation}
\overline{X} = `r round(mean(df$hp),1) ` \\
\overline{Y} = `r round(mean(df$got),1) `
\end{equation}
$$


$$
\begin{equation}
\frac{ \sum_{1:8}\left( x - \overline{X} \right) }{8} = `r round(mean(df$dis_hp),1) ` \\
\frac{ \sum_{1:8}\left( y - \overline{Y} \right) }{8} = `r round(mean(df$dis_got),1) `
\end{equation}
$$


$$
\begin{equation}
\frac{ \sum_{1:8}\left( x - \overline{X} \right)^2 }{8} = `r round(mean(df$dis_hp_2),1) ` \\
\frac{ \sum_{1:8}\left( y - \overline{Y} \right)^2 }{8} = `r round(mean(df$dis_got_2),1) `
\end{equation}
$$






]



]




.font50[

.pull-right[

```{r, echo=FALSE, include=TRUE, results="asis"}

df_tab <- df %>% select(c(moc_se, hp, dis_hp, dis_hp_2, got, dis_got, dis_got_2))

colnames(df_tab) <- c("\\(i\\)", "\\(X\\)",  "\\(X - \\overline{X}\\)", 
                      "\\( (X - \\overline{X})^2 \\)",  "\\(Y\\)",  "
                      \\(Y - \\overline{Y}\\)", "\\( (X - \\overline{X})^2 \\)")

df_tab %>% DT::datatable(caption = "Rotten Tomatos Scores", options = list(dom = "t", ordering = FALSE, columnDefs = list(list(className = 'dt-center', targets = "_all"))), rownames = FALSE)
```

.font150[

- **Conceptually**, these represent the sample variances of HP and GoT ratings
- But what about the units?

]
]

]


---
# Variance and Standard Deviation 2/N (Sample)



.font80[
.pull-left[

$$
\begin{equation}
\overline{X} = `r round(mean(df$hp),1) ` \\
\overline{Y} = `r round(mean(df$got),1) `
\end{equation}
$$


$$
\begin{equation}
s^{2}_{X} = \frac{ \sum_{1:8}\left( x - \overline{X} \right)^2 }{8} = `r round(mean(df$dis_hp_2),1) ` \\
s^{2}_{Y} = \frac{ \sum_{1:8}\left( y - \overline{Y} \right)^2 }{8} = `r round(mean(df$dis_got_2),1) `
\end{equation}
$$


$$
\begin{equation}
s_{X} = \sqrt{ \frac{ \sum_{1:8}\left( x - \overline{X} \right)^2 }{8} } = `r round(sqrt( mean(df$dis_hp_2) ),1) ` \\
s_{Y} = \sqrt{ \frac{ \sum_{1:8}\left( y - \overline{Y} \right)^2 }{8} } = `r round(sqrt( mean(df$dis_got_2) ),1) `
\end{equation}
$$







]



]




.font50[

.pull-right[

```{r, echo=FALSE, include=TRUE, results="asis"}

df_tab <- df %>% select(c(moc_se, hp, dis_hp, dis_hp_2, got, dis_got, dis_got_2))

colnames(df_tab) <- c("\\(i\\)", "\\(X\\)",  "\\(X - \\overline{X}\\)", 
                      "\\( (X - \\overline{X})^2 \\)",  "\\(Y\\)",  "
                      \\(Y - \\overline{Y}\\)", "\\( (X - \\overline{X})^2 \\)")

df_tab %>% DT::datatable(caption = "Rotten Tomatos Scores", options = list(dom = "t", ordering = FALSE, columnDefs = list(list(className = 'dt-center', targets = "_all"))), rownames = FALSE)
```

.font150[
- Due to a minor technicality we divide by $N-1$ instead of $N$ (not relevant for the course).
- $s^{2}_{X}$ and $s_{X}$ correspond to the sample variance and standard deviation.

]
]

]

---
count: false
# Variance and Standard Deviation 2/N (Sample)

.font80[
.pull-left[

$$
\begin{equation}
\overline{X} = `r round(mean(df$hp),1) ` \\
\overline{Y} = `r round(mean(df$got),1) `
\end{equation}
$$


$$
\begin{equation}
s^{2}_{X} = \frac{ \sum_{1:8}\left( x - \overline{X} \right)^2 }{8- 1} = `r round(sum(df$dis_hp_2) / ( length(df$dis_hp_2)  - 1 ),1) ` \\
s^{2}_{Y} = \frac{ \sum_{1:8}\left( y - \overline{Y} \right)^2 }{8 - 1} = `r round(sum(df$dis_got_2) / ( length(df$dis_got_2)  - 1 ),1) `
\end{equation}
$$


$$
\begin{equation}
s_{X} = \sqrt{ \frac{ \sum_{1:8}\left( x - \overline{X} \right)^2 }{8 - 1} } = `r round(sqrt( sum(df$dis_hp_2) / ( length(df$dis_hp_2)  - 1 ) ),1) ` \\
s_{Y} = \sqrt{ \frac{ \sum_{1:8}\left( y - \overline{Y} \right)^2 }{8 - 1} } = `r round(sqrt( sum(df$dis_got_2) / ( length(df$dis_got_2)  - 1 ) ),1) `
\end{equation}
$$



]



]




.font50[

.pull-right[

```{r, echo=FALSE, include=TRUE, results="asis"}

df_tab <- df %>% select(c(moc_se, hp, dis_hp, dis_hp_2, got, dis_got, dis_got_2))

colnames(df_tab) <- c("\\(i\\)", "\\(X\\)",  "\\(X - \\overline{X}\\)", 
                      "\\( (X - \\overline{X})^2 \\)",  "\\(Y\\)",  "
                      \\(Y - \\overline{Y}\\)", "\\( (X - \\overline{X})^2 \\)")

df_tab %>% DT::datatable(caption = "Rotten Tomatos Scores", options = list(dom = "t", ordering = FALSE, columnDefs = list(list(className = 'dt-center', targets = "_all"))), rownames = FALSE)
```


.font150[
- Due to a minor technicality we divide by $N-1$ instead of $N$ (not relevant for the course).
- $s^{2}_{X}$ and $s_{X}$ correspond to the sample variance and standard deviation.

]

]

]


---
# Variance and Standard Deviation 3/N (Population)

Let's focus on the formula for mean and sample variance of Harry Potter only. And for now, I will continue use $N$ (8) in the denominator for the variane to illustrate the following concept.  



.font90[
.pull-left[

$$
\begin{equation}
 \overline{X} = \frac{ \sum_{1:8}{x} }{8} = `r round(mean(df$hp),1) ` \\
\end{equation}
$$


$$
\begin{equation}
s^{2}_{X} = \frac{ \sum_{1:8}\left( x - \overline{X} \right)^2 }{8} = `r round(sum(df$dis_hp_2) / ( length(df$dis_hp_2) ),1) ` \\
\end{equation}
$$




]

]




.font80[

.pull-right[

]

]





---
# Variance and Standard Deviation 4/N (Population)


.font90[
.pull-left[

.center[ Sample ]
$$
\begin{equation}
 \color{#FD5F00}{  \overline{X} = \frac{ \sum_{1:8}{x} }{8} } = `r round(mean(df$hp),1) ` \\
\end{equation}
$$


$$
\begin{equation}
s^{2}_{X} = \frac{ \sum_{1:8}\left( x - \overline{X} \right)^2 }{8} = `r round(sum(df$dis_hp_2) / ( length(df$dis_hp_2)  ),1) ` \\
\end{equation}
$$





]

]



.font90[

.pull-right[

.center[ Population ]




]

]



---
# Variance and Standard Deviation 4/N (Population)


.font90[
.pull-left[

.center[ Sample ]
$$
\begin{equation}
 \color{#FD5F00}{ 
     \overline{X}  =  \frac{ \sum_{1:8}{x} }{8} = \sum_{1:8} x  \frac{1}{8}   
 } = `r round(mean(df$hp),1) ` \\
\end{equation}
$$


$$
\begin{equation}
s^{2}_{X} = \frac{ \sum_{1:8}\left( x - \overline{X} \right)^2 }{8} = `r round(sum(df$dis_hp_2) / ( length(df$dis_hp_2)  ),1) ` \\
\end{equation}
$$




]

]




.font90[

.pull-right[

.center[ Population ]




]

]


---
count:false
# Variance and Standard Deviation 4/N (Population)


.font90[
.pull-left[

.center[ Sample ]
$$
\begin{equation}
 \color{#FD5F00}{ 
  \overline{X}  =  \frac{ \sum_{1:8}{x} }{8} = \sum_{1:8} x  \frac{1}{8} = \\
  \sum_{1:8} x \times prop(x) 
 } = `r round(mean(df$hp),1) ` \\
\end{equation}
$$


$$
\begin{equation}
s^{2}_{X} = \frac{ \sum_{1:8}\left( x - \overline{X} \right)^2 }{8} = `r round(sum(df$dis_hp_2) / ( length(df$dis_hp_2)  ),1) ` \\
\end{equation}
$$




]

]




.font90[

.pull-right[

.center[ Population ]





]

]

---
count:true
# Variance and Standard Deviation 4/N (Population)


.font90[
.pull-left[

.center[ Sample ]
$$
\begin{equation}
 \color{#FD5F00}{ 
  \overline{X}  =  \frac{ \sum_{1:8}{x} }{8} = \sum_{1:8} x  \frac{1}{8} = \\
  \sum_{1:8} x \times prop(x) 
 } = `r round(mean(df$hp),1) ` \\
\end{equation}
$$


$$
\begin{equation}
s^{2}_{X} = \frac{ \sum_{1:8}\left( x - \overline{X} \right)^2 }{8} = `r round(sum(df$dis_hp_2) / ( length(df$dis_hp_2)  ),1) ` \\
\end{equation}
$$




]

]




.font90[

.pull-right[

.center[ Population ]

$$
\begin{equation}
 \color{#FD5F00}{ 
  \mathop{\mathbb{E}}(X)\equiv \sum_{x}x f(x)
  }\\
\end{equation}
$$



]

]
---
count:true
# Variance and Standard Deviation 4/N (Population)


.font90[
.pull-left[

.center[ Sample ]
$$
\begin{equation}
 \color{#FD5F00}{ 
  \overline{X}  =  \frac{ \sum_{1:8}{x} }{8} = \sum_{1:8} x  \frac{1}{8} = \\
  \sum_{1:8} x \times prop(x) 
 } = `r round(mean(df$hp),1) ` \\
\end{equation}
$$


$$
\begin{equation}
\color{#007935}{ 
s^{2}_{X} = \frac{ \sum_{1:8}\left( x - \overline{X} \right)^2 }{8} 
} = `r round(sum(df$dis_hp_2) / ( length(df$dis_hp_2)  ),1) ` \\
\end{equation}
$$




]

]




.font90[

.pull-right[

.center[ Population ]

$$
\begin{equation}
 \color{#FD5F00}{ 
  \mathop{\mathbb{E}}(X)\equiv \sum_{x}x f(x)
  }\\
\end{equation}
$$



]

]


---
count:true
# Variance and Standard Deviation 4/N (Population)


.font90[
.pull-left[

.center[ Sample ]
$$
\begin{equation}
 \color{#FD5F00}{ 
  \overline{X}  =  \frac{ \sum_{1:8}{x} }{8} = \sum_{1:8} x  \frac{1}{8} = \\
  \sum_{1:8} x \times prop(x) 
 } = `r round(mean(df$hp),1) ` \\
\end{equation}
$$


$$
\begin{equation}
\color{#007935}{ 
s^{2}_{X} = \frac{ \sum_{1:8} g(x) }{8} 
} = `r round(sum(df$dis_hp_2) / ( length(df$dis_hp_2)  ),1) ` \\
\end{equation}
$$




]

]




.font90[

.pull-right[

.center[ Population ]

$$
\begin{equation}
 \color{#FD5F00}{ 
  \mathop{\mathbb{E}}(X)\equiv \sum_{x}x f(x)
  }\\
\end{equation}
$$



]

]


---
count:true
# Variance and Standard Deviation 4/N (Population)


.font90[
.pull-left[

.center[ Sample ]
$$
\begin{equation}
 \color{#FD5F00}{ 
  \overline{X}  =  \frac{ \sum_{1:8}{x} }{8} = \sum_{1:8} x  \frac{1}{8} = \\
  \sum_{1:8} x \times prop(x) 
 } \\
\end{equation}
$$


$$
\begin{equation}
\color{#007935}{ 
s^{2}_{X} =  \frac{ \sum_{1:8}{g(x)} }{8} = \sum_{1:8} g(x)  \frac{1}{8} = \\   \sum_{1:8} g(x) \times prop(x) 
}  \\
\end{equation}
$$




]

]


--

.font90[

.pull-right[

.center[ Population ]

$$
\begin{equation}
 \color{#FD5F00}{ 
  \mathop{\mathbb{E}}(X)\equiv \sum_{x}x f(x)
  }\\
\end{equation}
$$


$$
\begin{equation}
 \color{#007935}{ 
  \mathop{\mathbb{E}}\left( g(x) \right)  = \\
  \mathop{\mathbb{E}}\left( (X - E(X))^2 \right) = \sum_{x} (x - E(X))^2 f(x)
  }\\
\end{equation}
$$


]

]


---
count:true
# Variance and Standard Deviation 4/N (Population)


.font90[
.pull-left[

.center[ Sample ]


$$
\begin{equation}
 \color{#FD5F00}{ 
  \overline{X}  =  \frac{ \sum_{1:8}{x} }{8} = \sum_{1:8} x  \frac{1}{8} = \\
  \sum_{1:8} x \times prop(x) 
 } \\
\end{equation}
$$


$$
\begin{equation}
\color{#007935}{ 
s^{2}_{X} =  \frac{ \sum_{1:8}{g(x)} }{8} = \sum_{1:8} g(x)  \frac{1}{8} = \\   \sum_{1:8} g(x) \times prop(x) 
}  \\
\end{equation}
$$




]

]




.font90[

.pull-right[

.center[ Population ]

$$
\begin{equation}
 \color{#FD5F00}{ 
  \mathop{\mathbb{E}}(X)\equiv \sum_{x}x f(x)
  }\\
\end{equation}
$$


$$
\begin{equation}
 \color{#007935}{ 
  \mathop{\mathbb{E}}\left( g(x) \right)  = \\
  \mathop{\mathbb{E}}\left( (X - E(X))^2 \right) = \sum_{x} (x - E(X))^2 f(x)
  }\\
\end{equation}
$$
Usually $E(X)$ is defined as $\mu$, so you might see: 

$$
\begin{equation}
 \color{#007935}{ 
  \mathop{\mathbb{E}}\left( ( X - \mu )^2 \right) = \sum_{x} (x - \mu)^2 f(x)
  }\\
\end{equation}
$$

]

]

---
count:true
# Variance and Standard Deviation 5/N (Done!)
You know know what are the variance and standard deviation and where do they come from!

.font200[

$$
\begin{equation}
  Var(X)  = \sigma^2 = \mathop{\mathbb{E}}\left( ( X - \mu )^2 \right) \\
  SD(X)  =  \sigma = \sqrt{ \mathop{\mathbb{E}}\left( ( X - \mu )^2 \right) }
\end{equation}
$$

]

---
# Variance

Random variables $\color{#e64173}{X}$ and $\color{#9370DB}{Y}$ share the same population mean, but are distributed differently.

```{R, echo = F, dev = "svg", fig.height = 4}
df <- tibble(x = seq(-4, 4, 0.01), 
             y = dnorm(x),
             z = dnorm(x, sd = 0.4)) %>%
  rbind(., tibble(x = seq(4, -4, -0.01), y = 0, z = 0))
ggplot() +
  scale_x_continuous(limits = c(-4, 4), expand=c(0,0)) +
  scale_y_continuous(limits = c(0, 1.1), expand=c(0,0), breaks = c(0, 0.5, 1), labels = c(0, 0.5, 1)) +
  geom_polygon(data = df, aes(x, y), fill = "#e64173", alpha = 0.5) +
  geom_polygon(data = df, aes(x, z), fill = "#9370DB", alpha = 0.5) +
  geom_vline(xintercept = 0, size = 1) +
  #geom_polygon(data = df %>% filter(x <= qnorm(0.5 + 0.475) & x >= qnorm(0.5 - 0.475)), aes(x, y), fill = red_pink) +
  #geom_vline(xintercept = qnorm(0.5 + 0.475), size = 0.35, linetype = "dashed", color = met_slate) +
  #geom_vline(xintercept = qnorm(0.5 - 0.475), size = 0.35, linetype = "dashed", color = met_slate) +
  theme_simple +
  xlab(paste0(expression(X), " and ", expression(Y))) + 
  ylab("Density")
```



---
# Variance

## Rule 1

$\mathop{\text{Var}}(X) = 0 \iff X$ is a constant.

- If a random variable never deviates from its mean, then it has zero variance.

- If a random variable is always equal to its mean, then it's a (not-so-random) constant.

---
# Variance

## Rule 2

For any constants $a$ and $b$, $\mathop{\text{Var}}(aX + b) = a^2\mathop{\text{Var}}(X)$.

--

## Example 

Suppose $X$ is the high temperature in degrees Celsius in Eugene during August. If $Y$ is the temperature in degrees Fahrenheit, then $Y = 32 + \frac{9}{5} X$. .hi-purple[What is] $\color{#9370DB}{\mathop{\text{Var}}(Y)}$.hi-purple[?]

--

- $\mathop{\text{Var}}(Y) = (\frac{9}{5})^2 \mathop{\text{Var}}(X) = \color{#9370DB}{\frac{81}{25} \mathop{\text{Var}}(X)}$.

---
# Variance

## Variance Rule 3

For constants $a$ and $b$,

$$
\mathop{\text{Var}} (aX + bY) = a^2 \mathop{\text{Var}}(X) + b^2 \mathop{\text{Var}}(Y) + 2ab\mathop{\text{Cov}}(X, Y).
$$
--

- If $X$ and $Y$ are uncorrelated, then $\mathop{\text{Var}} (X + Y) = \mathop{\text{Var}}(X) + \mathop{\text{Var}}(Y)$

- If $X$ and $Y$ are uncorrelated, then $\mathop{\text{Var}} (X - Y) = \mathop{\text{Var}}(X) + \mathop{\text{Var}}(Y)$


---
# Expectation and Variance of the Sample Mean

- Time for a subtle, but very important change of focus. 

- Until now we have been talking about the expectation and variance of a random variable. Now we are going to focus on the expectation and variance of the mean of that random variable. 
  - Wait? So 
  
  
```{r}
birthday.prob = function(n.pers, n.sims) {
# simulate birthdays
birthdays = matrix(round(runif(n.pers * n.sims,
                                 1, 365)),
                      nrow = n.sims, ncol = n.pers)
  # for each room (row) get unique birthdays
unique.birthdays = apply(birthdays, 1, function(x)
length(unique(x)) ) # Indicator with 1 if all are unique birthdays all.different = 1 * (unique.birthdays==n.pers)
  # Compute average time all have different birthdays
  result = 1 - mean(all.different)
return(result)
}
n.pers.p
```

